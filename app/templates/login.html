{% extends 'base.html' %}
{% block title %}Iniciar sesión{% endblock %}
{% block head %}{% endblock %}

{% block content %}
<div class="auth-wrapper">
  <div class="login-card">
    <div class="text-center mb-3">
      <img src="{{ url_for('static', filename='favicon.svg') }}" alt="logo" width="48" height="48">
      <h3 class="mt-2 brand-lead">Bank Tracker</h3>
      <p class="text-muted small">Accede a tus movimientos y reportes</p>
    </div>

    <form method="post">
      <div class="mb-3">
        <label for="username" class="form-label">Usuario</label>
        <input id="username" name="username" class="form-control form-control-lg" required autofocus>
      </div>
      <div class="mb-3">
        <label for="password" class="form-label">Contraseña</label>
        <input id="password" name="password" type="password" class="form-control form-control-lg" required>
      </div>
      <div class="d-grid gap-2">
        <button id="btn-login" class="btn btn-primary btn-lg" type="submit">
          <span id="btn-text">Ingresar</span>
          <span id="btn-spinner" class="spinner-border spinner-border-sm ms-2" role="status" aria-hidden="true" style="display:none"></span>
        </button>
      </div>
    </form>

    <div class="mt-3 text-center text-muted small">
      ¿Problemas para entrar? Contacta con el administrador.
    </div>
  </div>
</div>
{% endblock %}

  {% block scripts %}
    {{ super() }}
    <script>
      document.addEventListener('DOMContentLoaded', function(){
        const form = document.querySelector('form[method="post"]');
        const btn = document.getElementById('btn-login');
        const spinner = document.getElementById('btn-spinner');
        const text = document.getElementById('btn-text');
        if (form && btn) {
          form.addEventListener('submit', function(){
            btn.disabled = true;
            spinner.style.display = '';
            text.textContent = 'Ingresando...';
          });
        }
      });
    </script>
  {% endblock %}

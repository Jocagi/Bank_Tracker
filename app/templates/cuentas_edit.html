{% extends 'base.html' %}
{% block title %}Editar Cuenta{% endblock %}
{% block content %}
<h1>Editar Cuenta</h1>
<form method="post">
  <div class="mb-3">
    <label class="form-label">Banco</label>
    <input name="banco" class="form-control" value="{{ cuenta.banco }}">
  </div>
  <div class="mb-3">
    <label class="form-label">Tipo de cuenta</label>
    <input name="tipo_cuenta" class="form-control" value="{{ cuenta.tipo_cuenta }}">
  </div>
  <div class="mb-3">
    <label class="form-label">NÃºmero de cuenta</label>
    <input name="numero_cuenta" class="form-control" value="{{ cuenta.numero_cuenta }}">
  </div>
  <div class="mb-3">
    <label class="form-label">Alias (opcional)</label>
    <input name="alias" class="form-control" value="{{ cuenta.alias or '' }}" placeholder="Alias para mostrar en diagramas y filtros">
  </div>
  <div class="mb-3">
    <label class="form-label">Titular</label>
    <input name="titular" class="form-control" value="{{ cuenta.titular }}">
  </div>
  <div class="mb-3">
    <label class="form-label">Moneda</label>
    <input name="moneda" class="form-control" value="{{ cuenta.moneda }}">
  </div>
  
  {# Solo administradores pueden asignar propietario #}
  {% if current_user.is_authenticated and current_user.is_admin() %}
  <div class="mb-3">
    <label class="form-label">Propietario</label>
    <select name="user_id" class="form-select">
      <option value="">-- Sin asignar --</option>
      {% for u in users %}
        <option value="{{ u.id }}" {% if cuenta.user_id == u.id %}selected{% endif %}>{{ u.username }}</option>
      {% endfor %}
    </select>
    <div class="form-text">Solo los administradores pueden cambiar el propietario de la cuenta.</div>
  </div>
  {% endif %}
  
  <button class="btn btn-primary">Guardar</button>
  <a href="{{ url_for('main.list_cuentas') }}" class="btn btn-link">Cancelar</a>
</form>
{% endblock %}
